(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-687ebe67"],{"395d":function(e,t,a){"use strict";a.r(t);a("b0c0");var o=a("7a23"),l={class:"table w-75 mx-auto mb-4"},n=Object(o["h"])("thead",null,[Object(o["h"])("th",{width:"36%",class:"px-2"},"品名"),Object(o["h"])("th",{width:"30%",class:"px-2"},"數量"),Object(o["h"])("th",{colspan:"2",class:"px-2"},"單價")],-1),c={class:"input-group"},s={class:"input-group-text"},r={class:"text-end"},d={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},i=Object(o["g"])(" 刪除 "),b={class:"text-end py-3",colspan:"4"},u={class:"input-group"},h={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},m=Object(o["g"])(" 套用優惠碼 "),f={class:"text-end py-4",colspan:"4"},p={class:"h5 fw-bold mt-2 mb-0"},j={class:"mb-3"},O=Object(o["h"])("label",{for:"orderEmail",class:"form-label"},[Object(o["g"])(" E-mail "),Object(o["h"])("span",{class:"fw-bold text-danger"},"*")],-1),g={class:"mb-3"},v=Object(o["h"])("label",{for:"orderName",class:"form-label"},[Object(o["g"])(" 姓名 "),Object(o["h"])("span",{class:"fw-bold text-danger"},"*")],-1),y={class:"mb-3"},x=Object(o["h"])("label",{for:"orderTel",class:"form-label"},[Object(o["g"])(" 手機 "),Object(o["h"])("span",{class:"fw-bold text-danger"},"*")],-1),w={class:"mb-3"},k=Object(o["h"])("label",{for:"orderRegion",class:"form-label"},[Object(o["g"])(" 區域 "),Object(o["h"])("span",{class:"fw-bold text-danger"},"*")],-1),I={class:"mb-3"},C=Object(o["h"])("label",{for:"orderAddress",class:"form-label"},[Object(o["g"])(" 地址 "),Object(o["h"])("span",{class:"fw-bold text-danger"},"*")],-1),V={class:"mb-3"},M=Object(o["h"])("label",{for:"orderPay",class:"form-label"},[Object(o["g"])(" 付款方式 "),Object(o["h"])("span",{class:"fw-bold text-danger"},"*")],-1),A=Object(o["h"])("option",{value:"",hidden:"",disabled:""},"請選擇付款方式",-1),F=Object(o["h"])("option",{value:"WebATM"},"WebATM",-1),T=Object(o["h"])("option",{value:"ATM"},"ATM",-1),B=Object(o["h"])("option",{value:"Barcode"},"Barcode",-1),E=Object(o["h"])("option",{value:"Credit"},"Credit",-1),P=Object(o["h"])("option",{value:"Apple Pay"},"Apple Pay",-1),U=Object(o["h"])("option",{value:"Google Pay"},"Google Pay",-1),L={class:"mb-3"},q=Object(o["h"])("label",{for:"orderMsg",class:"form-label"},"留言",-1),$=Object(o["h"])("div",{class:"text-center"},[Object(o["h"])("button",{class:"btn btn-sm btn-success"}," 送出訂單 ")],-1);function D(e,t,a,D,S,_){var G=Object(o["A"])("Loading"),H=Object(o["A"])("Field"),J=Object(o["A"])("ErrorMessage"),N=Object(o["A"])("Form"),R=Object(o["A"])("FeedbackModal");return Object(o["t"])(),Object(o["e"])(o["a"],null,[Object(o["h"])(G,{active:S.isLoading},null,8,["active"]),Object(o["h"])("table",l,[n,Object(o["h"])("tbody",null,[(Object(o["t"])(!0),Object(o["e"])(o["a"],null,Object(o["y"])(S.carts,(function(e){return Object(o["t"])(),Object(o["e"])("tr",{key:e.id},[Object(o["h"])("td",null,Object(o["D"])(e.product.title),1),Object(o["h"])("td",null,[Object(o["h"])("div",c,[Object(o["h"])("input",{type:"number",class:"form-control",min:"1",value:e.qty},null,8,["value"]),Object(o["h"])("span",s,Object(o["D"])(e.product.unit),1)])]),Object(o["h"])("td",null,"$"+Object(o["D"])(e.product.price),1),Object(o["h"])("td",r,[Object(o["h"])("button",{class:"btn btn-sm btn-secondary",type:"button",onClick:function(t){return _.delCartItem(e.id)},disabled:S.loadingBtn.delCart==e.id},[S.loadingBtn.delCart==e.id?(Object(o["t"])(),Object(o["e"])("span",d)):Object(o["f"])("",!0),i],8,["onClick","disabled"])])])})),128))]),Object(o["h"])("tfoot",null,[Object(o["h"])("tr",null,[Object(o["h"])("td",b,[Object(o["h"])("div",u,[Object(o["M"])(Object(o["h"])("input",{type:"text",class:"form-control",placeholder:"請輸入優惠碼","onUpdate:modelValue":t[1]||(t[1]=function(e){return S.couponCode=e})},null,512),[[o["H"],S.couponCode]]),Object(o["h"])("button",{type:"button",class:"btn btn-danger btn-sm",onClick:t[2]||(t[2]=function(){return e.useCoupon&&e.useCoupon.apply(e,arguments)})},[S.loadingBtn.coupon?(Object(o["t"])(),Object(o["e"])("span",h)):Object(o["f"])("",!0),m])])])]),Object(o["h"])("tr",null,[Object(o["h"])("td",f,[Object(o["h"])("p",p,"總計 $"+Object(o["D"])(S.cartsTotal),1)])])])]),Object(o["h"])(N,{class:"orderForm mx-auto",onSubmit:_.onSubmit},{default:Object(o["L"])((function(e){var a=e.errors;return[Object(o["h"])("div",j,[O,Object(o["h"])(H,{type:"email",class:["form-control",{"is-invalid":a["E-mail"]}],id:"orderEmail",placeholder:"請輸入 E-mail",name:"E-mail",rules:"required|email",modelValue:S.orderInfo.user.email,"onUpdate:modelValue":t[3]||(t[3]=function(e){return S.orderInfo.user.email=e})},null,8,["modelValue","class"]),Object(o["h"])(J,{class:"invalid-feedback",name:"E-mail"})]),Object(o["h"])("div",g,[v,Object(o["h"])(H,{type:"text",class:["form-control",{"is-invalid":a["姓名"]}],id:"orderName",placeholder:"請輸入姓名",name:"姓名",rules:"required",modelValue:S.orderInfo.user.name,"onUpdate:modelValue":t[4]||(t[4]=function(e){return S.orderInfo.user.name=e})},null,8,["modelValue","class"]),Object(o["h"])(J,{class:"invalid-feedback",name:"姓名"})]),Object(o["h"])("div",y,[x,Object(o["h"])(H,{type:"tel",class:["form-control",{"is-invalid":a["手機"]}],id:"orderTel",placeholder:"請輸入手機號碼",name:"手機",rules:_.isPhone,modelValue:S.orderInfo.user.tel,"onUpdate:modelValue":t[5]||(t[5]=function(e){return S.orderInfo.user.tel=e})},null,8,["rules","modelValue","class"]),Object(o["h"])(J,{class:"invalid-feedback",name:"手機"})]),Object(o["h"])("div",w,[k,Object(o["h"])(H,{type:"text",id:"orderRegion",class:["form-control",{"is-invalid":a["區域"]}],name:"區域",placeholder:"請輸入區域",rules:"required",modelValue:S.orderInfo.user.region,"onUpdate:modelValue":t[6]||(t[6]=function(e){return S.orderInfo.user.region=e})},null,8,["modelValue","class"]),Object(o["h"])(J,{class:"invalid-feedback",name:"區域"})]),Object(o["h"])("div",I,[C,Object(o["h"])(H,{type:"text",id:"orderAddress",class:["form-control",{"is-invalid":a["地址"]}],name:"地址",placeholder:"請輸入地址",rules:"required",modelValue:S.orderInfo.user.address,"onUpdate:modelValue":t[7]||(t[7]=function(e){return S.orderInfo.user.address=e})},null,8,["modelValue","class"]),Object(o["h"])(J,{class:"invalid-feedback",name:"地址"})]),Object(o["h"])("div",V,[M,Object(o["h"])(H,{id:"orderPay",class:["form-select",{"is-invalid":a["付款方式"]}],name:"付款方式",rules:"required",as:"select",modelValue:S.orderInfo.user.payment,"onUpdate:modelValue":t[8]||(t[8]=function(e){return S.orderInfo.user.payment=e})},{default:Object(o["L"])((function(){return[A,F,T,B,E,P,U]})),_:2},1032,["modelValue","class"]),Object(o["h"])(J,{class:"invalid-feedback",name:"付款方式"})]),Object(o["h"])("div",L,[q,Object(o["M"])(Object(o["h"])("textarea",{class:"form-control",id:"orderMsg",rows:"4",placeholder:"有任何想對我們說的話嗎？","onUpdate:modelValue":t[9]||(t[9]=function(e){return S.orderInfo.message=e})},null,512),[[o["H"],S.orderInfo.message]])]),$]})),_:1},8,["onSubmit"]),Object(o["h"])(R,{ref:"feedbackModal",msg:S.msg},null,8,["msg"])],64)}a("99af");var S=a("8eb4"),_={data:function(){return{carts:[],cartsTotal:0,couponCode:"",orderInfo:{user:{email:"",name:"",tel:"",region:"",address:"",payment:""}},msg:"",isLoading:!0,loadingBtn:{}}},components:{FeedbackModal:S["a"]},methods:{getCart:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("peihan","/cart");this.axios.get(t).then((function(t){console.log(t),t.data.success&&(e.carts=t.data.data.carts,e.cartsTotal=t.data.data.final_total,e.isLoading=!1)})).catch((function(e){console.dir(e)}))},delCartItem:function(e){var t=this;this.loadingBtn.delCart=e;var a="".concat("https://vue3-course-api.hexschool.io","/api/").concat("peihan","/cart/").concat(e);this.axios.delete(a).then((function(e){e.data.success?(t.getCart(),t.loadingBtn.delCart="",t.opanIFmodal(e.data.message)):alert(e.data.message)})).catch((function(e){console.dir(e)}))},onSubmit:function(e,t){var a=this,o=t.resetForm;if(0!==this.carts.length){console.log("values",e);var l="".concat("https://vue3-course-api.hexschool.io","/api/").concat("peihan","/order"),n={data:this.orderInfo};console.log(n),this.axios.post(l,n).then((function(e){e.data.success?(o(),a.getCart()):alert(e.data.message)})).catch((function(e){console.dir(e)}))}else this.opanIFmodal("購物車沒東西哦")},isPhone:function(e){if(!e)return"手機 為必填";var t=/^(09)[0-9]{8}$/;return!!t.test(e)||"手機 格式不正確"},opanIFmodal:function(e){var t=this;this.msg=e,this.$refs.feedbackModal.openModal(),setTimeout((function(){t.$refs.feedbackModal.hideModal()}),1200)}},created:function(){document.title="我的購物車",this.getCart()}};_.render=D;t["default"]=_},"8eb4":function(e,t,a){"use strict";var o=a("7a23"),l={class:"modal fade",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",ref:"modal"},n={class:"modal-dialog rounded-pill shadow",style:{"max-width":"150px"}},c={class:"modal-content rounded-pill",style:{border:"none"}},s={class:"modal-body fw-bold text-center"};function r(e,t,a,r,d,i){return Object(o["t"])(),Object(o["e"])("div",l,[Object(o["h"])("div",n,[Object(o["h"])("div",c,[Object(o["h"])("div",s,Object(o["D"])(a.msg),1)])])],512)}var d=a("7c2b"),i=a.n(d),b={data:function(){return{modal:""}},mounted:function(){this.modal=new i.a(this.$refs.modal,{backdrop:!1})},props:["msg"],methods:{openModal:function(){this.modal.show(),document.body.style.overflow="auto"},hideModal:function(){this.modal.hide()}}};b.render=r;t["a"]=b},b0c0:function(e,t,a){var o=a("83ab"),l=a("9bf2").f,n=Function.prototype,c=n.toString,s=/^\s*function ([^ (]*)/,r="name";o&&!(r in n)&&l(n,r,{configurable:!0,get:function(){try{return c.call(this).match(s)[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-687ebe67.54fdc1e7.js.map